syntax = "proto3";
package ar.v1;

import "buf/validate/validate.proto";
import "validation/v1/predefined_string_rules.proto";

option csharp_namespace = "Messages.AR.V1";
option go_package = "github.com/cobotar/protocol/messages/ar/v1";

enum MarkerType {
  MARKER_TYPE_UNSPECIFIED = 0;
  MARKER_TYPE_QR_CODE = 1;
}

message MarkerMessage {
  string id = 1;
  string name = 2 [(buf.validate.field).string.(validation.v1.name_component) = true];
  string icon = 3;
  string description = 4;
  string marker_text = 5 [(buf.validate.field).string = {
    min_len: 2
    example: 'roberta'
  }]; // Text on the physical marker (QR-code)
  MarkerType type = 6 [
    (buf.validate.field).required = true,
    (buf.validate.field).enum.defined_only = true
  ];
  bool confirm_instantiate = 7; // If true, the user must confirm that he/she want to instantiate the environment(s) associated with this marker.
}

message MarkerMessages {
  repeated MarkerMessage markers = 1 [(buf.validate.field).cel = {
    id: "unique_marker_text"
    message: "marker text must be unique"
    expression: "this.map(marker, marker.marker_text).unique()"
  }];
}
